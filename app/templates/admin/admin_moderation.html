{% extends "admin/admin_header.html" %}
{% block admin_panel_body %}


<script>
    var element = document.getElementById("problem_moderation_href");
    element.classList.remove("text-stone-800");
    element.classList.add("text-blue-600");
</script>


{% with messages = get_flashed_messages(with_categories=true) %}
    {% for category, message in messages %}
        {% if category == "danger" %}
            <div class="w-full text-stone-800 text-semibold rounded p-6 text-lg text-center bg-red-400 border-2 border-solid border-red-600">{{ message }}</div>
        {% elif category == "warning" %}
            <div class="w-full text-stone-800 text-semibold rounded p-6 text-lg text-center bg-yellow-400 border-2 border-solid border-yellow-600">{{ message }}</div>
        {% elif category == "success" %}
            <div class="w-full text-stone-800 text-semibold rounded p-6 text-lg text-center bg-green-400 border-2 border-solid border-green-600">{{ message }}</div>
        {% endif %}
    {% endfor %}
{% endwith %}


{% if not need_to_moderate %}
<div class="w-full h-full flex flex-col items-center justify-center">
    <div class="text-stone-800 text-semibold rounded p-6 text-lg text-center border-2 border-solid">
        Нет задач для модерации. Приходите завтра!
    </div>

</div>
{% endif %}
<ul class="list-none p-0 mt-4">
    {% for problem in need_to_moderate %}

    <li class="border-4 border-solid border-sky-400 bg-white mb-4 p-4 flex flex-col rounded-lg hover:border-green-600">
        <div class="flex justify-between">
            <span class="text-black text-xl font-bold">{{ problem.name }}</span>
        </div>

        <div class="h-px w-full bg-neutral-300 my-2"></div>
        
        <span class="text-slate-500 font-bold">Условие:</span>
        {% for paragraph in problem.statement.split("\n") %}
        <p class="mathjax-class m-0 text-base">{{ paragraph }}</p>
        {% endfor %}

        <div class="h-px w-full bg-neutral-300 my-2"></div>

        <details>
            <summary class="text-slate-500 font-bold">Решение:</summary>
            {% for paragraph in problem.solution.split("\n") %}
            <p class="mathjax-class m-0 text-base">{{ paragraph }}</p>
            {% endfor %}
        </details>

        <div class="h-px w-full bg-neutral-300 my-2"></div>

        <details>
            <summary class="text-slate-500 font-bold">Теги:</summary>
            <div class="flex gap-x-8 items-start">
                <ul class="w-full">
                    {% for tag in problem.get_tags() %}
                    <li class="flex">
                        <span class="text-slate-500 font-bold mr-4">#</span>
                        <div class="w-2/3"><span>{{ tag.name }}</span></div>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </details>

        <div class="h-px w-full bg-neutral-300 my-2"></div>

        <div class="flex gap-x-8">
            <form action="/admin/problem_moderation" method="POST">
                <input type="hidden" name="accept problem_id" value="{{ problem.id }}">
                <input type="submit" value="Опубликовать" class="hover:cursor-pointer px-8 py-2 rounded-md text-white font-semibold bg-green-500 hover:bg-green-600 active:bg-green-700">
            </form>
            <form action="/admin/problem_moderation" method="POST">
                <input type="hidden" name="reject problem_id" value="{{ problem.id }}">
                <input type="submit" value="Отклонить" class="hover:cursor-pointer px-8 py-2 rounded-md text-white font-semibold bg-red-500 hover:bg-red-600 active:bg-red-700">
            </form>
        </div>
    </li>
    {% endfor %}
</ul>
{% endblock %}